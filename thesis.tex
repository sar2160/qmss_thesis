%% this formatting courtesy of https://github.com/jgabry/qmss_paper/blob/master/thesis.tex

\documentclass[oneside,12pt] {book}

% MARGINS: one inch
\usepackage[margin=1in]{geometry}

% DOUBLE SPACING
\renewcommand{\baselinestretch}{2}
\usepackage{setspace}
\usepackage{etoolbox}
\usepackage{setspace}
\usepackage{todonotes}
\usepackage{fullpage}
\usepackage{graphicx}
\usepackage{amsfonts}

\usepackage[]{hyperref}
\hypersetup{
    pdftitle={Thesis_SRimmele},    % title
    pdfauthor={Simon Rimmele},     % author
    colorlinks=true,       % false: boxed links; true: colored links
    linkcolor=black,          % color of internal links (change box color with linkbordercolor)
    citecolor=black,        % color of links to bibliography
    filecolor=black,      % color of file links
    urlcolor=black           % color of external links
}



\graphicspath{{assets/}}


% APA CITATIONS
\usepackage[bibnewpage, nosectionbib]{apacite} %apa citation style
\bibliographystyle{apacite}

% FONTS
\usepackage[]{mathptmx}
\usepackage{amsmath,amsfonts,amssymb}
\usepackage{bm} % Bold-italic math font

% ALIGNMENT & INDENTATION
\usepackage[document]{ragged2e} % left alignment (ragged right) instead of justified
\setlength{\RaggedRightParindent}{.5in} % 1/2 inch paragraph indentation
\usepackage{indentfirst} % indent first paragraphs after \section{} and friends

% APPENDICES
\usepackage[toc,title,page]{appendix}

% FOR FIGURES
\usepackage{graphicx}
% FOR LISTS
\usepackage{enumerate}

% FOR NICER TABLES
\usepackage{booktabs}

% FIGURE CAPTIONS
\usepackage[font={small, it},format=hang,justification=justified,labelsep=space,labelfont={small,bf,up}]{caption}

% SIDE-BY-SIDE FIGURES
\usepackage{subcaption}

% CHAPTER TITLE STYLES
\usepackage{titlesec}
\definecolor{gray75}{gray}{0.75}
\newcommand{\hsp}{\hspace{20pt}}

% PRETTY FORMATTING OF SOURCE CODE'
%\usepackage{styles/pygmentize}
%\usepackage{styles/minted}
%\setminted{fontsize=\small baselinestretch=1}

% \AtBeginEnvironment{minted}{\singlespacing\fontsize{10}{10}\selectfont}

% \usepackage{styles/lstBUGS} % for pretty source code (https://github.com/jrnold/lstBUGS)
% \lstset{
% basicstyle=\scriptsize\singlespacing,
% keywordstyle=\color{DarkSlateGray}\bfseries,
% keywordstyle=[2]{\color{Black!80}},
% commentstyle=\color{DimGrey},
% frameround=fttt,
% backgroundcolor=\color{AliceBlue!80},
% xleftmargin=2em,
% xrightmargin=2em
% }

% HEADER, FOOTER, PAGE NUMBERS
\usepackage{fancyhdr} %header
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt} % remove line at top of each page
\fancyfoot[R]{\thepage} % Set the right side of the footer to be the page number

\fancypagestyle{plain}{% Redefine plain style, which is used for titlepage and chapter beginnings
    \renewcommand{\headrulewidth}{0pt}% From http://tex.stackexchange.com/a/30230/828
    \fancyhf{}%
    \fancyfoot[R]{\thepage}%
}

% FIGURE CAPTIONS
\usepackage[font={small, it},format=hang,justification=justified,labelsep=space,labelfont={small,bf,up}]{caption}

%CHAPTER TITLE STYLES
\usepackage{titlesec}
\definecolor{gray75}{gray}{0.75}
\newcommand{\hsp}{\hspace{20pt}}



% TITLE PAGE
\newcommand*{\titleGM}{\begingroup % Create the command for including the title page in the document
\hbox{ % Horizontal box
\hspace*{0.2\textwidth} % Whitespace to the left of the title page
\rule{1pt}{\textheight} % Vertical line
\hspace*{0.05\textwidth} % Whitespace between the vertical line and title page text
\parbox[b]{0.75\textwidth}{ % Paragraph box which restricts text to less than the width of the page

\singlespacing
{\noindent\Huge\bfseries Cities Are Already Smart:}\\[2\baselineskip] % Title
{\large\noindent\textit{urban spatiotemporal prediction with Gaussian processes}}\\[4\baselineskip] % Tagline or further description

\vspace{2cm}

{\LARGE \textsc{Simon Rimmele}} % Author name

\vspace{.5cm}

{\large \textsc{Advisor: Benjamin Goodrich}}

\vspace{.5cm}
\textsc{May, 2018}

\vspace{0.3\textheight} % Whitespace between the title block and the publisher
\begin{center}
%{\noindent \bf }\\[\baselineskip]
{\noindent Columbia University $\vert$ New York}
\end{center}
}}
\endgroup}
% end TITLE PAGE


% NEW ENVIRONMENTS & COMMANDS

% environment for temporarily shrinking margins
\newenvironment{changemargin}[2]{%
\begin{list}{}{%
\setlength{\topsep}{0pt}%
\setlength{\leftmargin}{#1}%
\setlength{\rightmargin}{#2}%
\setlength{\listparindent}{\parindent}%
\setlength{\itemindent}{\parindent}%
\setlength{\parsep}{\parskip}%
}%
\item[]}{\end{list}}

\begin{document}

\titleGM % This command includes the title page


% ACKNOWLEDGEMENTS
\begin{acknowledgments}
\setcounter{page}{2}
Many thanks for your time and advice:

{\singlespacing
Benjamin Goodrich, \\
Jonathan Auerbach, \\
Seth Flaxman, \\
Jonah Gabry \\
}

\end{acknowledgments}

\clearpage


% ABSTRACT
\begin{abstract}
\setcounter{page}{1}
\begin{quote}
\begin{changemargin}{.5cm}{.5cm}
\justify


 Drawing its modeling and evaluation framework from \citeA{flaxman_2014}, this thesis investigates the use of Gaussian process models for spatiotemporal prediction of social phenomena in an urban setting. Inspired also by advances in timeseries forecasting by \citeA{prophet}, this work privileges simplicity and parsimony in the user experience, accepting only location and timeseries data as inputs while producing results with easily interpretable parameters for  audiences with varying technical knowledge. Models are evaluated at varying levels of spatial and temporal resolution on predictive accuracy and estimate reliability in comparison to standard autoregressive models in a case study of motor vehicle collisions in New York City. It is argued that this type of modeling could be further developed so decision-makers in urban environments may easily leverage existing spatiotemporal data in their daily work.



\end{changemargin}
\end{quote}
\end{abstract}


\begingroup
\mainmatter

\input{sections/introduction}
\input{sections/literature_review}
\input{sections/design}
\input{sections/experiments}
\input{sections/results}
\input{sections/discussion}
\endgroup


\begin{appendices}
\setcounter{subsection}{0}
\input{sections/appendices}
\end{appendices}


\backmatter
\begingroup
\titleformat{\chapter}[hang]{\Huge\bfseries}{\thechapter\hsp\textcolor{gray75}{|}\hsp}{0pt}{\Huge\bfseries}
    \setstretch{1}
    \setlength\bibitemsep{1\baselineskip}
    \raggedright
    \bibliography{bibliography.bib}
\endgroup

\end{document}
